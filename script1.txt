#!/bin/sh
#inštalácia knižníc potrebných pre prehliadač otter-browser
dnf -y install qt5-qtbase glibc libstdc++ qt5-qtxmlpatterns qt5-qtbase-gui qt5-qtbase-devel qt5-qtmultimedia-devel qt5-qtsvg-devel qt5-qtwebkit-devel qt5-qtwebengine qt5-qtwebchannel hunspell qt5-qtmultimedia
#inštalácia vývojárskych nástrojov pre inštaláciu prostredia Xfce
dnf -y groupinstall "Development Tools"
dnf install epel-release -y
dnf --enablerepo=epel group
dnf config-manager --set-enabled powertools
dnf groupinstall -y "Xfce" "base-x"
#príkaz pre štart prostredia z príkazového riadka
echo "exec /usr/bin/xfce4-session" >> ~/.xinitrc
#nastavenie grafického loginu ako základné
systemctl set-default graphical
#inštalácia Xfce prostredia
dnf -y install xfce4-session
yum groupinstall -y "Server with GUI"
dnf install -y xorg-x11-server-Xorg
#inštalácia "balíkov" tretej strany potrebných pre inštaláciu otter-browseru
dnf -y install https://pkgs.dyn.su/el8/base/x86_64/raven-release-1.0-2.el8.noarch.rpm
dnf --enablerepo=raven-multimedia
dnf --enablerepo=raven-extras
#inštalácia otter-browseru
dnf install -y otter-browser
#inštalácia knižníc potrebných pre terminál xterm a jeho inštalácia
dnf install -y xcb-util xterm
#inštalácia pdf prehliadača dokumentov Xpdf
dnf install -y https://download-ib01.fedoraproject.org/pub/epel/7/x86_64/Packages/x/xpdf-3.04-10.el7.x86_64.rpm
dnf install -y motif libpng15 poppler-utils urw-fonts xorg-x11-fonts-ISO8859-1-100dpi xorg-x11-fonts-ISO8859-1-75dpi
#zápis knižníc a aplikácií do chráneného priečinka
echo "otter-browser" > /etc/dnf/protected.d/otter-browser.conf
echo "accountsservice" > /etc/dnf/protected.d/accountsservice.conf
echo "xpdf" > /etc/dnf/protected.d/xpdf.conf
echo "libQt5WebEngineWidgets" > /etc/dnf/protected.d/libQt5WebEngineWidgets
echo "libQt5Multimedia" > /etc/dnf/protected.d/libQt5Multimedia.conf
echo "libQt5WebEngineCore" > /etc/dnf/protected.d/libQt5WebEngineCore.conf
echo "xorg-x11-fonts-ISO8859-1-100dpi" > /etc/dnf/protected.d/xorg-x11-fonts-ISO8859-1-100dpi.conf
echo "xorg-x11-fonts-ISO8859-1-75dpi" > /etc/dnf/protected.d/xorg-x11-fonts-ISO8859-1-75dpi.conf
echo "xorg-x11-server-Xorg" > /etc/dnf/protected.d/xorg-x11-server-Xorg.conf
echo "sudo" > /etc/dnf/protected.d/sudo.conf
echo "dnf" > /etc/dnf/protected.d/dnf.conf
echo "Xfce" > /etc/dnf/protected.d/Xfce.conf
echo "xterm" > /etc/dnf/protected.d/xterm.conf
echo "NetworkManager" > /etc/dnf/protected.d/NetworkManager.conf
echo "bash" > /etc/dnf/protected.d/bash.conf
useradd -s /sbin/nologin mockbuild
#mazanie useless vecí
yum autoremove -y gnome PackageKit.x86_64 chrome-gnome-shell.x86_64 gnome-control-center-filesysyem.noarch gnome-autoar.x86_64
rm -rfv /mockbuild
rm -rfv /home/peterk/otter-browser-master/build/
